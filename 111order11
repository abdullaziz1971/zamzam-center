<!DOCTYPE html><html lang="ar" dir="rtl"><head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3MB80QG8CE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-3MB80QG8CE');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡ | Ø²Ù…Ø²Ù… Ø¬Ù…Ù„Ø©</title>

  <style>
    :root{--ink:#0b0b0b;--bg:#ffffff;--navy:#0d2240;--lav:#b794f4;--muted:#4b5563;--border:#e5e7eb;--green:#16a34a;--pill:#f1f5f9}
    *{box-sizing:border-box}
    body{margin:0;background:#fff;color:var(--ink);font-family:"Tajawal",system-ui,-apple-system,"Segoe UI",Roboto,Arial;padding-bottom:120px}
    .page{max-width:1100px;margin:16px auto;padding:0 16px;border:4px solid var(--lav);border-radius:18px}
    header{background:var(--navy);color:#fff;border-radius:12px;margin:16px 16px 0;padding:16px}
    header h1{margin:0 0 6px;font-size:clamp(20px,4.5vw,32px)}
    header .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    input[type="tel"]{padding:8px 10px;border-radius:10px;border:1px solid var(--border);font-family:inherit}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:#f8fafc;color:#111;text-decoration:none;font-weight:800;transition:background .2s}
    .btn:hover{background:#e5e7eb}
    .btn.primary{background:#22c55e;color:#062B11}
    .btn.danger{background:#dc2626;color:#fff}
    .notification{position:fixed;top:20px;right:20px;z-index:9999;background:#fff;border:2px solid var(--lav);border-radius:12px;padding:16px 20px;box-shadow:0 10px 30px rgba(0,0,0,.2);max-width:400px;display:none}
    .notification.show{display:block;animation:slideIn .3s ease}
    .notification.success{border-color:#16a34a;background:#f0fdf4}
    .notification.warning{border-color:#f59e0b;background:#fffbeb}
    .notification.error{border-color:#dc2626;background:#fef2f2}
    @keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
    section{margin:16px}
    h2{margin:0 0 8px;font-size:22px;font-weight:900}
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .section-total{font-size:18px;font-weight:900;color:var(--green)}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
    .card{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff;transition:box-shadow .2s}
    .card:hover{box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .card.has-quantity{border-color:var(--green);background:#f0fdf4}
    .title{font-weight:800;font-size:15px;margin-bottom:4px}
    .muted{color:var(--muted);font-size:13px}
    .price{font-weight:800;color:var(--green)}
    .unavailable{color:#b91c1c;font-weight:700}
    .qtybox{display:flex;gap:6px;align-items:center;margin-top:8px}
    .step{width:34px;height:34px;border-radius:8px;border:1px solid var(--border);background:#f8fafc;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
    .step:hover:not(:disabled){background:var(--green);color:#fff;border-color:var(--green)}
    .step:disabled{opacity:.3;cursor:not-allowed}
    .qty{width:70px;text-align:center;padding:8px;border-radius:8px;border:1px solid var(--border);font-weight:800;font-size:16px}
    select.variant{margin-top:6px;padding:8px;border:1px solid var(--border);border-radius:8px;width:100%;font-family:inherit}
    .line-total{margin-top:6px;font-size:14px;color:var(--muted)}
    .line-total b{color:var(--green);font-size:15px}
    .footerBar{position:fixed;bottom:0;left:0;right:0;z-index:998;background:#10b981;color:#032a1f;padding:14px 16px;box-shadow:0 -4px 20px rgba(0,0,0,.15);display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
    .pill{padding:6px 12px;border-radius:999px;background:#fff;border:1px solid rgba(0,0,0,.1);font-size:14px;font-weight:800}
    .pill b{color:var(--green)}
    .footerBar .btn-send{display:inline-flex;align-items:center;gap:8px;background:#0d2240;color:#fff;border:2px solid #fff;padding:12px 20px;border-radius:999px;text-decoration:none;font-weight:900;font-size:16px;transition:all .2s;cursor:pointer}
    .footerBar .btn-send:hover{transform:scale(1.05);background:#1e3a8a}
    .footerBar .btn-clear{background:#dc2626;color:#fff;border:none;padding:10px 16px;border-radius:999px;font-weight:800;cursor:pointer;transition:all .2s}
    .footerBar .btn-clear:hover{background:#b91c1c}
    .empty-state{text-align:center;padding:60px 20px;color:var(--muted)}
    .empty-state h3{font-size:24px;margin-bottom:10px}
    .empty-state p{font-size:16px;margin-bottom:20px}
    @media (max-width:768px){
      .cards{grid-template-columns:1fr}
      .footerBar{flex-direction:column;padding:12px}
      .footerBar .btn-send{width:100%}
      header .row{flex-direction:column}
      header .row .btn{width:100%}
    }
  </style>
</head>

<!-- Ø´Ø±ÙŠØ· Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ (ÙƒÙ…Ø§ Ù‡Ùˆ) -->

<body>
  <div id="notification" class="notification"><div id="notification-text"></div></div>

  <div class="page">
    <header>
      <h1>ğŸ›’ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡ â€” Ø²Ù…Ø²Ù… Ø¬Ù…Ù„Ø©</h1>
      <div class="row">
        <span>Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨:</span>
        <input id="phone" type="tel" value="962799755536" />
        <a class="btn" href="index.html">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶</a>
      </div>
      <p class="muted" style="margin:6px 0 0">
        Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ© Ù„ÙƒÙ„ Ù…Ø§Ø¯Ø©. Ø§Ù„Ù…ÙˆØ§Ø¯ Ø°Ø§Øª Ø§Ù„Ù†ÙƒÙ‡Ø§Øª Ù…Ø°ÙƒÙˆØ± Ø¹Ø¯Ø¯Ù‡Ø§ Ø¶Ù…Ù† Ø§Ù„Ø§Ø³Ù…. 
        Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯ ØªØ­ØªÙˆÙŠ Ø£ÙƒØ«Ø± Ù…Ù† ØªØ¹Ø¨Ø¦Ø© (Ø³Ø¹Ø± Ù…Ø®ØªÙ„Ù) ÙˆØ³ØªØ¸Ù‡Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ø®ØªÙŠØ§Ø±.
        <strong>Ø§Ù„Ø·Ù„Ø¨ ÙŠÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙƒÙ„ ØªØºÙŠÙŠØ±.</strong>
      </p>
    </header>

    <!-- Merged Offers -->
    <section id="sec-merge">
      <div class="section-header">
        <h2>ğŸ’¥ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©</h2>
        <span class="section-total" id="total-merge">0.00 Ø¯.Ø£</span>
      </div>
      <div class="cards" id="cards-merge"></div>
    </section>

    <!-- Featured Offers -->
    <section id="sec-featured">
      <div class="section-header">
        <h2>âœ¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
        <span class="section-total" id="total-featured">0.00 Ø¯.Ø£</span>
      </div>
      <div class="cards" id="cards-featured"></div>
    </section>

    <!-- Company Offers -->
    <div id="companies-sections"></div>

    <div id="empty-state" class="empty-state" style="display:none">
      <h3>ğŸ›’ Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</h3>
      <p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯</p>
      <a href="index.html" class="btn primary">ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶</a>
    </div>
  </div>

  <div class="footerBar">
    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <span class="pill">Ø¯Ù…Ø¬: <b id="sum-merge">0.00</b> Ø¯.Ø£</span>
      <span class="pill">Ø§Ù„Ù…Ù…ÙŠØ²: <b id="sum-featured">0.00</b> Ø¯.Ø£</span>
      <span class="pill" id="companies-totals"></span>
      <span class="pill" style="background:#eafff2;font-size:16px">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <b id="sum-grand" style="font-size:18px">0.00</b> Ø¯.Ø£</span>
    </div>
    <div style="display:flex;gap:8px">
      <button class="btn-clear" onclick="clearCart()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
      <button class="btn-send" onclick="sendOrder()">ğŸ“² Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="data.js"></script>
  <script src="compat-data-alias.js"></script>
  <script src="cart.js"></script>
  <script>
    let currentCart = null;

    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const text = document.getElementById('notification-text');
      text.textContent = message;
      notification.className = `notification ${type} show`;
      setTimeout(() => { notification.classList.remove('show'); }, 3000);
    }

    function makeCard(item, type, companyId = null, companyName = null) {
      const hasVariants = item.hasVariants && item.variants && item.variants.length > 0;
      const itemPrice = type === 'featured' ? item.discountedPrice : item.price;
      const isUnavailable = !hasVariants && (itemPrice === null || itemPrice === undefined);
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.id = item.id;
      card.dataset.type = type;
      if (companyId) card.dataset.companyId = companyId;
      let html = `<div class="title">${item.title}</div>`;
      if (item.description) { html += `<div class="muted">${item.description}</div>`; }
      let preferIndex = 0;
      if (type === 'company' && hasVariants) {
        const hasSecond = item.variants.length > 1 && item.variants[1] && item.variants[1].price != null;
        preferIndex = hasSecond ? 1 : 0;
      }
      if (isUnavailable) {
        html += `<div class="unavailable">ØºÙŠØ± Ù…ØªÙˆÙØ±</div>`;
      } else if (hasVariants) {
        html += `<select class="variant" onchange="handleVariantChange(this)">
          ${item.variants.map((v, i) =>
            `<option value="${i}" data-price="${v.price || 0}" ${i === preferIndex ? 'selected' : ''}>
              ${v.label} â€” ${ZamzamCart.formatPrice(v.price || 0)} Ø¯.Ø£
            </option>`
          ).join('')}
        </select>`;
      } else {
        const price = type === 'featured' ? item.discountedPrice : item.price;
        html += `<div class="muted">Ø§Ù„Ø³Ø¹Ø±: <span class="price">${ZamzamCart.formatPrice(price)} Ø¯.Ø£</span></div>`;
      }
      if (!isUnavailable) {
        const defaultPrice = hasVariants ? (item.variants[preferIndex]?.price || 0) : (type === 'featured' ? item.discountedPrice : item.price);
        html += `
          <div class="qtybox">
            <button class="step" onclick="changeQuantity(this, -1)">âˆ’</button>
            <input class="qty" type="number" min="0" step="1" value="0" onchange="handleQuantityChange(this)" data-price="${defaultPrice}" data-variant-index="${hasVariants ? preferIndex : ''}" />
            <button class="step" onclick="changeQuantity(this, 1)">+</button>
          </div>
          <div class="line-total">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø§Ø¯Ø©: <b class="line-value">0.00 Ø¯.Ø£</b></div>`;
      }
      card.innerHTML = html;
      card._itemData = {
        id: item.id, title: item.title, type: type, companyId, companyName,
        hasVariants: hasVariants, variants: hasVariants ? item.variants : null,
        price: hasVariants ? (item.variants[preferIndex]?.price) : (type === 'featured' ? item.discountedPrice : item.price)
      };
      return card;
    }

    function isActiveCompany(c){
      return c && !(c.active === false || c.active === 'false' || c.active === 0 || c.active === '0');
    }

    function loadProducts() {
      const mergeContainer = document.getElementById('cards-merge');
      (ZAMZAM_DATA.mergedOffers.items||[]).forEach(item => { mergeContainer.appendChild(makeCard(item, 'merged')); });

      const featuredContainer = document.getElementById('cards-featured');
      (ZAMZAM_DATA.featuredOffers.items||[]).forEach(item => { featuredContainer.appendChild(makeCard(item, 'featured')); });

      const companiesContainer = document.getElementById('companies-sections');
      (ZAMZAM_DATA.companies||[])
        .filter(isActiveCompany)
        .sort((a, b) => a.displayOrder - b.displayOrder)
        .forEach(company => {
          const section = document.createElement('section');
          section.id = `sec-company-${company.id}`;
          section.innerHTML = `
            <div class="section-header">
              <h2>${company.icon || ''} ${company.name}</h2>
              <span class="section-total" id="total-company-${company.id}">0.00 Ø¯.Ø£</span>
            </div>
            <div class="cards" id="cards-company-${company.id}"></div>`;
          companiesContainer.appendChild(section);
          const cardsContainer = document.getElementById(`cards-company-${company.id}`);
          (company.products||[]).filter(p=>p.visible!==false).forEach(product => {
            cardsContainer.appendChild(makeCard(product, 'company', company.id, company.name));
          });
        });
    }

    function restoreCart() {
      currentCart = ZamzamCart.load();
      const syncResult = ZamzamCart.syncPrices(currentCart, ZAMZAM_DATA);
      currentCart = syncResult.cart;
      if (syncResult.hasChanges) {
        const messages = syncResult.changes.map(c => {
          if (c.change === 'removed') return `${c.title}: ØªÙ… Ø¥Ø²Ø§Ù„ØªÙ‡ (ØºÙŠØ± Ù…ØªÙˆÙØ±)`;
          return `${c.title}: ${ZamzamCart.formatPrice(c.oldPrice)} â† ${ZamzamCart.formatPrice(c.newPrice)}`;
        });
        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±:\n' + messages.join('\n'), 'warning');
      }
      currentCart.items.forEach(item => {
        const card = document.querySelector(
          `.card[data-id="${item.id}"][data-type="${item.type}"]${item.companyId ? `[data-company-id="${item.companyId}"]` : ''}`
        );
        if (card) {
          const qtyInput = card.querySelector('.qty');
          if (qtyInput) {
            qtyInput.value = item.quantity;
            qtyInput.dataset.price = item.price;
            if (item.variantIndex !== null && item.variantIndex !== undefined) {
              const variantSelect = card.querySelector('.variant');
              if (variantSelect) { variantSelect.value = item.variantIndex; }
              qtyInput.dataset.variantIndex = item.variantIndex;
            }
            updateCardAppearance(card, item.quantity);
          }
        }
      });
      updateTotals();
    }

    function handleVariantChange(select) {
      const card = select.closest('.card');
      const qtyInput = card.querySelector('.qty');
      const option = select.options[select.selectedIndex];
      const newPrice = parseFloat(option.dataset.price || 0);
      const variantIndex = parseInt(select.value);
      qtyInput.dataset.price = newPrice;
      qtyInput.dataset.variantIndex = variantIndex;
      if (parseInt(qtyInput.value) > 0) { updateCartItem(card, parseInt(qtyInput.value)); }
      updateLineTotal(card);
    }

    function handleQuantityChange(input) {
      let value = parseInt(input.value || 0);
      if (isNaN(value) || value < 0) value = 0;
      input.value = value;
      const card = input.closest('.card');
      updateCartItem(card, value);
      updateLineTotal(card);
      updateCardAppearance(card, value);
      updateTotals();
    }

    function changeQuantity(button, delta) {
      const card = button.closest('.card');
      const qtyInput = card.querySelector('.qty');
      let value = parseInt(qtyInput.value || 0) + delta;
      if (value < 0) value = 0;
      qtyInput.value = value;
      updateCartItem(card, value);
      updateLineTotal(card);
      updateCardAppearance(card, value);
      updateTotals();
    }

    function updateCartItem(card, quantity) {
      const itemData = card._itemData;
      const qtyInput = card.querySelector('.qty');
      const price = parseFloat(qtyInput.dataset.price || 0);
      const variantIndex = qtyInput.dataset.variantIndex !== '' ? parseInt(qtyInput.dataset.variantIndex) : null;
      const variantLabel = variantIndex !== null && itemData.variants ? itemData.variants[variantIndex]?.label : null;
      const item = {
        id: itemData.id, type: itemData.type, companyId: itemData.companyId || null, companyName: itemData.companyName || null,
        title: itemData.title, price: price, quantity: quantity,
        variantIndex: variantIndex, variantLabel: variantLabel, total: quantity * price
      };
      currentCart = ZamzamCart.updateItem(currentCart, item);
    }

    function updateLineTotal(card) {
      const qtyInput = card.querySelector('.qty');
      const lineValue = card.querySelector('.line-value');
      if (!lineValue) return;
      const quantity = parseInt(qtyInput.value || 0);
      const price = parseFloat(qtyInput.dataset.price || 0);
      const total = quantity * price;
      lineValue.textContent = ZamzamCart.formatPrice(total) + ' Ø¯.Ø£';
    }

    function updateCardAppearance(card, quantity) {
      if (quantity > 0) card.classList.add('has-quantity');
      else card.classList.remove('has-quantity');
    }

function updateTotals(){
  // Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø¯Ù…Ø¬ ÙˆØ§Ù„Ù…Ù…ÙŠØ²
  document.getElementById('sum-merge').textContent     = ZamzamCart.formatPrice(currentCart.totals.merged);
  document.getElementById('sum-featured').textContent  = ZamzamCart.formatPrice(currentCart.totals.featured);
  document.getElementById('total-merge').textContent   = ZamzamCart.formatPrice(currentCart.totals.merged)  + ' Ø¯.Ø£';
  document.getElementById('total-featured').textContent= ZamzamCart.formatPrice(currentCart.totals.featured)+ ' Ø¯.Ø£';

  // ØªØµÙÙŠØ± Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«
  document.querySelectorAll('.section-total').forEach(el => { el.textContent = '0.00 Ø¯.Ø£'; });
  // ØªÙ†Ø¸ÙŠÙ Ø´Ø±ÙŠØ· Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø³ÙÙ„ÙŠ
  document.getElementById('companies-totals').innerHTML = '';

  // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª
  const companiesHTML = [];
  Object.keys(currentCart.totals.companies).forEach(companyId => {
    const total = currentCart.totals.companies[companyId];
    const company = (ZAMZAM_DATA.companies||[]).find(c => c.id === companyId);
    const companyName = company ? company.name : companyId;
    companiesHTML.push(`${companyName}: <b>${ZamzamCart.formatPrice(total)}</b> Ø¯.Ø£`);
    const totalEl = document.getElementById(`total-company-${companyId}`);
    if (totalEl) totalEl.textContent = ZamzamCart.formatPrice(total) + ' Ø¯.Ø£';
  });

  if (companiesHTML.length > 0) {
    document.getElementById('companies-totals').innerHTML = companiesHTML.join(' | ');
  } else {
    document.getElementById('companies-totals').innerHTML = '';
  }

  // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø³Ù„Ø©
  document.getElementById('sum-grand').textContent = ZamzamCart.formatPrice(currentCart.totals.grand);
  const emptyState = document.getElementById('empty-state');
  emptyState.style.display = currentCart.items.length === 0 ? 'block' : 'none';
}

    function sendOrder() {
      if (currentCart.items.length === 0) { showNotification('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©! ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹', 'warning'); return; }
      const phone = document.getElementById('phone').value.trim();
      if (!phone) { showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨', 'error'); return; }
      const url = ZamzamCart.buildWhatsAppMessage(currentCart, phone);
      if (typeof gtag !== 'undefined') {
        gtag('event', 'whatsapp_order', { 'event_category': 'engagement','event_label': 'Order Sent','value': currentCart.totals.grand });
      }
      window.open(url, '_blank');
      showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨...', 'success');
    }

    function clearCart() {
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨ØŸ')) return;
      ZamzamCart.clear();
      currentCart = ZamzamCart.getEmptyCart();
      document.querySelectorAll('.qty').forEach(input => {
        input.value = 0;
        const card = input.closest('.card');
        updateCardAppearance(card, 0);
        updateLineTotal(card);
      });
      updateTotals();
      showNotification('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­', 'success');
         }
         <style>.pulse-focus{outline:3px solid rgba(0,0,0,.3);}</style>
<script>
function focusCompanyFromQuery(){
  const params = new URLSearchParams(location.search);
  const cid = params.get('company');
  if(!cid) return;

  // Ø£Ø®ÙÙ ÙƒÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  document.querySelectorAll('section[id^="sec-company-"]').forEach(sec=>{
    const id = sec.id.replace('sec-company-','');
    sec.style.display = (id === cid) ? '' : 'none';
  });

  // Ù…Ø±Ù‘Ø± ÙˆØ§Ø¨Ø±ÙØ² Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  const target = document.getElementById('sec-company-'+cid);
  if(target){
    requestAnimationFrame(()=>{
      target.scrollIntoView({behavior:'smooth', block:'start'});
      target.classList.add('pulse-focus');
      setTimeout(()=>target.classList.remove('pulse-focus'),1500);
    });
  }
}
</script>


document.addEventListener('DOMContentLoaded', function() {
  loadProducts();
  restoreCart();

  // Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø´Ø±ÙƒØ© Ù…Ø­Ø¯Ù‘Ø¯Ø© Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ£ØªÙŠÙ†Ø§ ?company=<id>
  focusCompanyFromQuery();

  document.addEventListener('visibilitychange', function() {
    if (document.hidden && currentCart) ZamzamCart.save(currentCart);
  });
});
    <style>.pulse-focus{outline:3px solid rgba(0,0,0,.3);}</style>
<script>
// ØªØ­Ø¯ÙŠØ¯ Ø´Ø±ÙƒØ© Ù…Ø¹ÙŠÙ†Ø© Ø¹Ø¨Ø± Ø¨Ø§Ø±Ø§Ù…ÙŠØªØ± ?company=
(function(){
  const params = new URLSearchParams(location.search);
  const cid = params.get('company');
  if(!cid) return;

  // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  document.querySelectorAll('section[id^="sec-company-"]').forEach(sec=>{
    const id = sec.id.replace('sec-company-','');
    if(id !== cid) sec.style.display='none';
  });

  // ØªÙ…Ø±ÙŠØ± ÙˆØ¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
  const target = document.getElementById('sec-company-'+cid);
  if(target){
    target.scrollIntoView({behavior:'smooth',block:'start'});
    target.classList.add('pulse-focus');
    setTimeout(()=>target.classList.remove('pulse-focus'),1500);
  }
})();

  </script>
</body></html>
