<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3MB80QG8CE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-3MB80QG8CE');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØ© | Ø²Ù…Ø²Ù… Ø¬Ù…Ù„Ø©</title>
<link rel="icon" href="favicon.ico">
<style>
  .btn-main {background:#16a34a !important; color:#fff !important; font-weight:900; font-size:20px; border:none; min-width:260px; justify-content:center; box-shadow:0 2px 10px #d1fae5; letter-spacing:1px; transition:background .22s; padding:14px 28px; border-radius:10px; text-decoration:none; display:inline-block}
  .btn-main:hover{ background:#0e8a37 !important }
  :root{--ink:#0b0b0b;--bg:#ffffff;--navy:#0d2240;--lav:#b794f4;--muted:#4b5563;--border:#e5e7eb;--green:#16a34a}
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--ink);font-family:"Tajawal",system-ui,-apple-system,"Segoe UI",Roboto,Arial}
  .page{max-width:1100px;margin:16px auto;padding:0 16px;border:4px solid var(--lav);border-radius:18px;background:#fff}
  .hero{background:#0a1d3e;color:#fff;text-align:center;padding:30px 20px}
  .hero img{max-width:120px;height:auto;margin-bottom:15px}
  .hero h1{font-size:1.9rem;margin-bottom:10px;font-weight:700}
  .hero p{font-size:1.05rem;line-height:1.6;max-width:750px;margin:0 auto 0}
  .countdown-bar{background:#fff3f2;color:#e11d48;padding:14px 0;text-align:center;font-size:19px;font-weight:900;margin:16px;border-radius:10px}
  .buy-note{color:#1d4ed8;background:#eef0fa;font-size:17px;font-weight:850;margin:16px;padding:10px;border-radius:8px;text-align:center}
  .card{border:1px solid var(--border);border-radius:12px;background:#fff;margin:16px;padding-bottom:10px}
  .card h2{margin:0;padding:12px 14px 4px 14px;border-bottom:1px solid var(--border);font-size:22px;font-weight:900}
  .table-wrap{overflow:auto}
  table{width:100%;border-collapse:collapse;font-size:14px}
  thead th{background:#f3f4f6;text-align:right;color:#111;padding:10px;border-bottom:1px solid var(--border)}
  tbody td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}
  tbody tr:hover{background:#fafafa}
  .price{font-weight:800}
  .strike{color:#9ca3af;text-decoration:line-through}
  .note{color:var(--muted);font-size:12px}
  .companies-nav{margin:16px;padding:16px;background:#f8fafc;border-radius:12px;border:1px solid var(--border)}
  .companies-nav h2{margin:0 0 12px 0;font-size:22px;font-weight:900}
  .companies-buttons{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
  .btn-company{display:block;padding:14px;background:#fff;border:2px solid var(--lav);border-radius:10px;text-decoration:none;color:#ink;font-weight:800;text-align:center;transition:all .2s}
  .btn-company:hover{background:var(--lav);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px rgba(183,148,244,.3)}
  footer{padding:14px 16px;border-top:1px dashed var(--border);margin:0 16px 16px;color:var(--muted);text-align:center}
  .fab-order{position:fixed;left:16px;bottom:16px;z-index:999;display:flex;align-items:center;gap:10px;background:#0d2240;color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,.25);border:1px solid #b794f4;text-decoration:none;font-weight:800;font-size:15px;transition:transform .25s ease,background .3s}
  .fab-order:hover{transform:scale(1.05);background:#1e3a8a}
  .fab-order .badge{background:#16a34a;color:#fff;padding:4px 10px;border-radius:999px;font-size:13px;font-weight:900}
  @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(16,185,129,.6);}70%{box-shadow:0 0 0 15px rgba(16,185,129,0);}100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}}
  .fab-order.pulse{animation:pulse 2s infinite}
  @media (max-width:768px){ .hero{padding:18px 15px} .hero img{max-width:90px;margin-bottom:10px} .hero h1{font-size:1.3rem;margin-bottom:6px} .hero p{font-size:.9rem;line-height:1.4;max-width:95%} .companies-buttons{grid-template-columns:1fr} }
</style>
</head>
<body>
  <section class="hero">
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø²Ù…Ø²Ù… Ø¬ÙÙ…Ù„Ø©">
    <h1>Ø²Ù…Ø²Ù… Ø¬ÙÙ…Ù„Ø© â€” Ù…Ù†ØµØªÙƒ Ø§Ù„Ø°ÙƒÙŠØ© Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¬Ù…Ù„Ø©</h1>
    <p>Ù„Ù„Ù…Ø­Ù„Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ²Ù‘Ø¹ÙŠÙ†. ØªØµÙÙ‘Ø­ Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ø®ØªØ± Ù…Ù†ØªØ¬Ø§ØªÙƒ ÙˆØ§Ø­Ø³Ø¨ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø«Ù… Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.</p>
  </section>

  <div class="page">
    <div id="countdown-bar" class="countdown-bar">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø¹Ø±ÙˆØ¶...</div>
    <div class="buy-note">Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¯Ù…Ø¬ ÙˆØ§Ù„Ù…Ù…ÙŠØ²Ø© ØªØªØ¬Ø¯Ø¯ ÙƒÙ„ Ø³Ø¨Øª ÙˆØ«Ù„Ø§Ø«Ø§Ø¡. Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†.</div>

    <section class="card">
      <h2 id="merged-title">ğŸ’¥ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¯Ù…Ø¬ Ø§Ù„Ù…Ù…ÙŠØ²Ø© ğŸ”¥</h2>
      <div class="table-wrap"><table><thead><tr><th>Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© ÙƒØ±ØªÙˆÙ†Ø© + ÙƒØ±ØªÙˆÙ†Ø©</th><th style="width:140px">Ø³Ø¹Ø± Ø§Ù„Ø¯Ù…Ø¬ (Ø¯.Ø£)</th></tr></thead><tbody id="merged-tbody"></tbody></table></div>
    </section>

    <section class="card">
      <h2 id="featured-title">âœ¨ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù„Ø§Ø« Ø§Ù„Ù…Ù…ÙŠØ²Ø©!</h2>
      <div class="table-wrap"><table><thead><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ØªØ¹Ø¨Ø¦Ø©/Ø§Ù„ÙˆØµÙ</th><th style="width:120px">Ø§Ù„Ø³Ø¹Ø±</th><th style="width:120px">Ø§Ù„Ù…Ù…ÙŠØ²</th></tr></thead><tbody id="featured-tbody"></tbody></table></div>
    </section>

    <section class="companies-nav">
      <h2>ğŸ¢ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø´Ø±ÙƒØ§Øª</h2>
      <div class="companies-buttons" id="companies-buttons"></div>
    </section>

    <div style="text-align:center;margin:24px 16px">
      <a class="btn-main" href="order.html">ğŸ›’ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡</a>
    </div>

    <footer>Â© Ù…Ø±ÙƒØ² ÙŠÙ†Ø§Ø¨ÙŠØ¹ Ø²Ù…Ø²Ù… â€” Ø£Ø³Ø¹Ø§Ø± Ø¬Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±Ø§ØªÙŠÙ†/Ø§Ù„Ø·Ø±ÙˆØ¯. Ø¨Ø¹Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø­ØªÙ‰ Ù†ÙØ§Ø¯ Ø§Ù„ÙƒÙ…ÙŠØ©.</footer>
  </div>

  <a href="order.html" class="fab-order pulse">ğŸ›’ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† <span class="badge" id="cart-count">0</span></a>

  <script src="data.js"></script>
  <script src="compat-data-alias.js"></script>
  <script src="cart.js"></script>
  <script>
    async function preferFreshAdminJson(){
      try{
        const r = await fetch('/admin_v2/data.json?ts=' + Date.now(), {cache:'no-store'});
        if(!r.ok) return;
        const j = await r.json();
        const oldTs = (window.ZAMZAM_DATA && ZAMZAM_DATA.metadata && ZAMZAM_DATA.metadata.lastUpdate) ? new Date(ZAMZAM_DATA.metadata.lastUpdate) : null;
        const newTs = (j && j.metadata && j.metadata.lastUpdate) ? new Date(j.metadata.lastUpdate) : null;
        if(!oldTs || (newTs && newTs > oldTs)){
          window.ZAMZAM_DATA = j;
        }
      }catch(_){}
    }

    function isActiveCompany(c){
  if(!c) return false;
  const active = !(c.active === false || c.active === 'false' || c.active === 0 || c.active === '0');
  const show   = !(c.showInCompanies === false || c.showInCompanies === 'false' || c.showInCompanies === 0 || c.showInCompanies === '0');
  return active && show;
}


    // Countdown (Mon & Thu 6pm)
    function getNextOfferEnd(){const now=new Date(),targets=[1,4];let next=null;for(const d of targets){const c=new Date(now);let da=(d-now.getDay()+7)%7;c.setDate(now.getDate()+da);c.setHours(18,0,0,0);if(da===0&&c<=now)c.setDate(c.getDate()+7);if(!next||c<next)next=c}return next}
    function formatDelta(t){const n=new Date(),s=Math.floor((t-n)/1000);if(s<0)return'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¹Ø±Ø¶';const d=Math.floor(s/86400),h=Math.floor((s%86400)/3600),m=Math.floor((s%3600)/60);return d+' ÙŠÙˆÙ… '+h+' Ø³Ø§Ø¹Ø© '+m+' Ø¯Ù‚ÙŠÙ‚Ø©'}
    function updateCountdown(){const e=getNextOfferEnd(),el=document.getElementById('countdown-bar');if(el){el.innerHTML='<span style="color:#e11d48">ğŸ’¥ Ø³Ø§Ø±Ø¹! </span>Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ù†Ù‡Ø§ÙŠØ© Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¯Ù…Ø¬ & Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù…ÙŠØ²: <b>'+formatDelta(e)+'</b>'}}
    function loadMergedOffers(){const tbody=document.getElementById('merged-tbody'), title=document.getElementById('merged-title'); if (ZAMZAM_DATA.mergedOffers.active){title.textContent=ZAMZAM_DATA.mergedOffers.title; ZAMZAM_DATA.mergedOffers.items.forEach(it=>{const tr=document.createElement('tr'); tr.innerHTML='<td>'+it.title+'</td><td class="price">'+ZamzamCart.formatPrice(it.price)+'</td>'; tbody.appendChild(tr);});}}

    function loadFeaturedOffers(){
      const tbody=document.getElementById('featured-tbody'); const titleEl=document.getElementById('featured-title');
      if(!window.ZAMZAM_DATA||!ZAMZAM_DATA.featuredOffers) return; const fo=ZAMZAM_DATA.featuredOffers;
      if(!fo.active||!Array.isArray(fo.items)) return; titleEl.textContent=fo.title||'âœ¨ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù„Ø§Ø« Ø§Ù„Ù…Ù…ÙŠØ²Ø©!';
      tbody.innerHTML='';
      for(var i=0;i<fo.items.length;i++){var item=fo.items[i]||{};
        var desc=(item.description!=null && item.description!=='undefined' && item.description!=='')? String(item.description)
                : ((item.packaging!=null && item.packaging!=='')? String(item.packaging)
                   : ((item.unit!=null && item.unit!=='')? String(item.unit): 'â€”'));
        var orig=Number(item.originalPrice)||0; var disc=Number(item.discountedPrice)||0;
        var tr=document.createElement('tr'); tr.innerHTML='<td>'+(item.title||'')+'</td><td>'+desc+'</td><td class="strike">'+ZamzamCart.formatPrice(orig)+'</td><td class="price">'+ZamzamCart.formatPrice(disc)+'</td>'; tbody.appendChild(tr);
      }
    }

    function loadCompanies(){
      const container=document.getElementById('companies-buttons');
      const active = (ZAMZAM_DATA.companies||[]).filter(isActiveCompany).sort((a,b)=>a.displayOrder-b.displayOrder);
      active.forEach(company=>{
        const count = (company.products||[]).filter(p=>p.visible!==false).length;
        const btn=document.createElement('a'); btn.href='companies.html?ids='+company.id; btn.className='btn-company';
        btn.innerHTML = (company.icon||'')+' '+company.name+'<br><span class="note">('+(count)+' ØµÙ†Ù)</span>';
        container.appendChild(btn);
      });
    }

    function updateCartBadge(){const cart=ZamzamCart.load(); const badge=document.getElementById('cart-count'); const total=cart.items.reduce((s,i)=>s+i.quantity,0); if(badge){badge.textContent=total; badge.style.display=total>0?'inline-block':'none';}}

    document.addEventListener('DOMContentLoaded', async function() {
      await preferFreshAdminJson();
      updateCountdown();
      setInterval(updateCountdown, 60000);
      loadMergedOffers();
      loadFeaturedOffers();
      loadCompanies();
      updateCartBadge();
    });
  </script>
</body>
</html>
